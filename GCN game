import random
from collections import Counter
per = input("Would you like to play this game: ")
if per.lower() == "yes":
    print("*******RULES*******")
    print("1. A 4 digit secret random code will be generated by the computer.")
    print("2. You have to guess (4 digit number) to crack the secret number. You get to decide the number of guesses.")
    print("3. Upon making a guess, 2 hints will be provided - Correct and Position.")
    print("4. 'Correct' indicates the number of correct digits in the correct position and 'Position' indicates the number of correct digits in the wrong position.")
    print("5. For example, if the secret code is 1234 and the guessed number is 1246, then we have 2 correct (for the exact matches of digits 1 and 2) and 1 position (for the match of digit 4 in the wrong position).")
    print("6. Keep guessing until the secret code is cracked or until your chances are over.")
    print("*******GOOD LUCK*******")
else:
    print("Ok bye -_-")
    exit() 
def getdigits(num):
    return [int(i) for i in str(num)]
def noduplicate(num):
    num_ask = getdigits(num)
    return len(num_ask) == len(set(num_ask))
def generatenum():
    while True:
        num = random.randint(1000, 9999)
        if noduplicate(num):
            return num
def numofcrctpost(num, guess):
    result = [0, 0]
    num_ask = getdigits(num)
    guess_ask = getdigits(guess)
    for i in range(4):
        if guess_ask[i] == num_ask[i]:
            result[0] += 1
    num_count = Counter(num_ask)
    guess_count = Counter(guess_ask)

    for digit in guess_count:
        result[1] += min(num_count[digit], guess_count[digit])
    result[1] -= result[0]

    return result
num = generatenum()
tries = int(input("Enter number of tries: "))

while tries > 0:
    try:
        guess = int(input("Enter your guess: "))
    except ValueError:
        print("Invalid input. Please enter a valid 4-digit number.")
        continue

    if not noduplicate(guess):
        print("Number should not have repeated digits. Try again.")
        continue
    if guess < 1000 or guess > 9999:
        print("Enter a 4-digit number only. Try again.")
        continue

    result = numofcrctpost(num, guess)
    print(f"{result[0]} correct, {result[1]} position")
    tries -= 1

    if result[0] == 4:
        print("You guessed it right!")
        break
else:
    print(f"You ran out of tries. The number was {num}.")
